# –ë—ä—Ä–∑–æ –†—ä–∫–æ–≤–æ–¥—Å—Ç–≤–æ - –ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—è –Ω–∞ Stripe CLI

## ‚ö° –ù–∞–π-–ë—ä—Ä–∑ –ù–∞—á–∏–Ω

### –°—Ç—ä–ø–∫–∞ 1: –°–≤–∞–ª–∏ Stripe CLI –†—ä—á–Ω–æ

1. –û—Ç–∏–¥–∏ –Ω–∞: **https://github.com/stripe/stripe-cli/releases/latest**
2. –°–≤–∞–ª–∏ —Ñ–∞–π–ª–∞: **`stripe_X.X.X_windows_x86_64.msi`** (–∫—ä–¥–µ—Ç–æ X.X.X –µ –≤–µ—Ä—Å–∏—è—Ç–∞)
3. –ö–ª–∏–∫–Ω–∏ –¥–≤–∞ –ø—ä—Ç–∏ –Ω–∞ `.msi` —Ñ–∞–π–ª–∞ –∏ —Å–ª–µ–¥–≤–∞–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏—Ç–µ –∑–∞ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è
4. –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π PowerShell —Ç–µ—Ä–º–∏–Ω–∞–ª–∞

### –°—Ç—ä–ø–∫–∞ 2: –ü—Ä–æ–≤–µ—Ä–∏ –ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—è—Ç–∞

```powershell
stripe --version
```

–ê–∫–æ –≤–∏–¥–∏—à –≤–µ—Ä—Å–∏—è—Ç–∞ (–Ω–∞–ø—Ä. `stripe version 1.33.0`), –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è—Ç–∞ –µ —É—Å–ø–µ—à–Ω–∞! ‚úÖ

### –°—Ç—ä–ø–∫–∞ 3: Login –≤ Stripe

```powershell
stripe login
```

–¢–æ–≤–∞ —â–µ –æ—Ç–≤–æ—Ä–∏ –±—Ä–∞—É–∑—ä—Ä - –ø—Ä–æ—Å—Ç–æ –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–∞–π —Å–µ —Å —Ç–≤–æ—è Stripe –∞–∫–∞—É–Ω—Ç.

### –°—Ç—ä–ø–∫–∞ 4: –°—Ç–∞—Ä—Ç–∏—Ä–∞–π Webhook Listener

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ò–∑–ø–æ–ª–∑–≤–∞–π –≥–æ—Ç–æ–≤–∏—è —Å–∫—Ä–∏–ø—Ç**

```powershell
.\start-stripe-webhook.ps1
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –†—ä—á–Ω–æ**

```powershell
stripe listen --forward-to https://localhost:5001/Payment/Webhook
```

**–ó–∞–±–µ–ª–µ–∂–∫–∞:** –ê–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Ä–∞–±–æ—Ç–∏ –Ω–∞ –¥—Ä—É–≥ –ø–æ—Ä—Ç, –ø—Ä–æ–º–µ–Ω–∏ `5001` —Å—ä—Å —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è –ø–æ—Ä—Ç.

### –°—Ç—ä–ø–∫–∞ 5: –ö–æ–ø–∏—Ä–∞–π Webhook Secret

–°–ª–µ–¥ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ, —â–µ –≤–∏–¥–∏—à:

```
> Ready! Your webhook signing secret is whsec_xxxxxxxxxxxxx
```

–ö–æ–ø–∏—Ä–∞–π —Ç–æ–∑–∏ `whsec_...` secret!

### –°—Ç—ä–ø–∫–∞ 6: –î–æ–±–∞–≤–∏ Secret –≤ appsettings.json

–û—Ç–≤–æ—Ä–∏ `appsettings.json` –∏ –¥–æ–±–∞–≤–∏/–æ–±–Ω–æ–≤–∏:

```json
"Stripe": {
  "PublishableKey": "pk_test_YOUR_KEY",
  "SecretKey": "sk_test_YOUR_KEY",
  "WebhookSecret": "whsec_xxxxxxxxxxxxx"  // ‚Üê –¢–æ–∑–∏ –æ—Ç —Å—Ç—ä–ø–∫–∞ 5
}
```

### –°—Ç—ä–ø–∫–∞ 7: –°—Ç–∞—Ä—Ç–∏—Ä–∞–π –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ

```powershell
dotnet run
```

### –°—Ç—ä–ø–∫–∞ 8: –¢–µ—Å—Ç–≤–∞–π!

1. –û—Ç–∏–¥–∏ –Ω–∞ –¥–µ—Ç–∞–π–ª–∏—Ç–µ –Ω–∞ –∏–º–æ—Ç
2. –ö–ª–∏–∫–Ω–∏ "Pay with Stripe"
3. –í—ä–≤–µ–¥–∏ —Ç–µ—Å—Ç–æ–≤–∞ –∫–∞—Ä—Ç–∞: `4242 4242 4242 4242`
4. –©–µ –≤–∏–¥–∏—à webhook events –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∫—ä–¥–µ—Ç–æ —Ä–∞–±–æ—Ç–∏ `stripe listen`

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–°–µ–≥–∞ webhooks —Ä–∞–±–æ—Ç—è—Ç –ª–æ–∫–∞–ª–Ω–æ! üéâ

## –ü—Ä–æ–±–ª–µ–º–∏?

### "stripe: command not found"

- –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
- –ò–ª–∏ –¥–æ–±–∞–≤–∏ —Ä—ä—á–Ω–æ –≤ PATH: `C:\Program Files\Stripe\`

### "Execution Policy"

```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### Webhook events –Ω–µ –ø—Ä–∏—Å—Ç–∏–≥–∞—Ç

- –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Ä–∞–±–æ—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ –ø–æ—Ä—Ç—ä—Ç –µ –ø—Ä–∞–≤–∏–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ —Å–∏ –ª–æ–≥–Ω–∞—Ç: `stripe login`
