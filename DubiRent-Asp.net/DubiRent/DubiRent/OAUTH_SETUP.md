# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ OAuth –∑–∞ –ª–æ–∫–∞–ª–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

## ‚úÖ –†–∞–±–æ—Ç–∏ –ª–æ–∫–∞–ª–Ω–æ –±–µ–∑ –ø—É–±–ª–∏—á–µ–Ω —Ö–æ—Å—Ç–∏–Ω–≥!

Google –∏ Facebook OAuth **–ø–æ–¥–¥—ä—Ä–∂–∞—Ç localhost** –∑–∞ development. –ù–µ –µ –Ω—É–∂–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –¥–∞ –µ —Ö–æ—Å—Ç–Ω–∞—Ç–æ –ø—É–±–ª–∏—á–Ω–æ, –∑–∞ –¥–∞ —Ç–µ—Å—Ç–≤–∞—Ç–µ OAuth —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç—Ç–∞.

---

## üìã –õ–æ–∫–∞–ª–Ω–∏ URL-—Ç–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ

–°–ø–æ—Ä–µ–¥ `launchSettings.json`, –≤–∞—à–∏—Ç–µ –ª–æ–∫–∞–ª–Ω–∏ URL-—Ç–∞ —Å–∞:

- **HTTPS**: `https://localhost:7008`
- **HTTP**: `http://localhost:5028`
- **IIS Express HTTPS**: `https://localhost:44329`
- **IIS Express HTTP**: `http://localhost:46402`

**–ü—Ä–µ–ø–æ—Ä—ä–∫–∞**: –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ HTTPS –ø—Ä–æ—Ñ–∏–ª–∞ (`https://localhost:7008`), —Ç—ä–π –∫–∞—Ç–æ OAuth –ø—Ä–æ–≤–∞–π–¥—ä—Ä–∏—Ç–µ —Ä–∞–±–æ—Ç—è—Ç –ø–æ-–¥–æ–±—Ä–µ —Å HTTPS.

---

## üîµ Google OAuth –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –°—Ç—ä–ø–∫–∞ 1: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console

1. –û—Ç–∏–¥–µ—Ç–µ –Ω–∞ [Google Cloud Console](https://console.cloud.google.com/)
2. –°—ä–∑–¥–∞–π—Ç–µ –Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –∏–∑–±–µ—Ä–µ—Ç–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â
3. –ê–∫—Ç–∏–≤–∏—Ä–∞–π—Ç–µ **Google+ API** (–∞–∫–æ –Ω–µ –µ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–∞)

### –°—Ç—ä–ø–∫–∞ 2: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ OAuth 2.0 Client ID

1. –û—Ç–∏–¥–µ—Ç–µ –≤ **APIs & Services** ‚Üí **Credentials**
2. –ö–ª–∏–∫–Ω–µ—Ç–µ **+ CREATE CREDENTIALS** ‚Üí **OAuth client ID**
3. –ê–∫–æ –ø—ä—Ä–≤–∏ –ø—ä—Ç, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ **OAuth consent screen**:

   - –ò–∑–±–µ—Ä–µ—Ç–µ **External** (–∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ)
   - –ü–æ–ø—ä–ª–Ω–µ—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∏—Ç–µ –ø–æ–ª–µ—Ç–∞
   - –î–æ–±–∞–≤–µ—Ç–µ –≤–∞—à email –∫–∞—Ç–æ —Ç–µ—Å—Ç–æ–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª

4. –°—ä–∑–¥–∞–π—Ç–µ OAuth Client ID:
   - **Application type**: `Web application`
   - **Name**: `DubiRent Local Dev` (–∏–ª–∏ –∫–∞–∫–≤–æ—Ç–æ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç–µ)
   - **Authorized redirect URIs**:
     ```
     https://localhost:7008/signin-google
     http://localhost:5028/signin-google
     https://localhost:44329/signin-google
     ```

### –°—Ç—ä–ø–∫–∞ 3: –ö–æ–ø–∏—Ä–∞–Ω–µ –Ω–∞ credentials

1. –ö–æ–ø–∏—Ä–∞–π—Ç–µ **Client ID**
2. –ö–æ–ø–∏—Ä–∞–π—Ç–µ **Client Secret**
3. –î–æ–±–∞–≤–µ—Ç–µ –≥–∏ –≤ `appsettings.json`:

```json
{
  "Authentication": {
    "Google": {
      "ClientId": "–í–ê–®–ò–Ø–¢-GOOGLE-CLIENT-ID.apps.googleusercontent.com",
      "ClientSecret": "–í–ê–®–ò–Ø–¢-GOOGLE-CLIENT-SECRET"
    }
  }
}
```

---

## üìò Facebook OAuth –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –°—Ç—ä–ø–∫–∞ 1: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Facebook

1. –û—Ç–∏–¥–µ—Ç–µ –Ω–∞ [Facebook for Developers](https://developers.facebook.com/)
2. –ö–ª–∏–∫–Ω–µ—Ç–µ **My Apps** ‚Üí **Create App**
3. –ò–∑–±–µ—Ä–µ—Ç–µ **Consumer** –∫–∞—Ç–æ —Ç–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ü–æ–ø—ä–ª–Ω–µ—Ç–µ –∏–º–µ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –∏ email –∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç

### –°—Ç—ä–ø–∫–∞ 2: –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ Facebook Login

1. –í –ª—è–≤–æ—Ç–æ –º–µ–Ω—é –Ω–∞–º–µ—Ä–µ—Ç–µ **Products**
2. –ù–∞–º–µ—Ä–µ—Ç–µ **Facebook Login** –∏ –∫–ª–∏–∫–Ω–µ—Ç–µ **Set Up**
3. –ò–∑–±–µ—Ä–µ—Ç–µ **Web** –∫–∞—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞

### –°—Ç—ä–ø–∫–∞ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. –û—Ç–∏–¥–µ—Ç–µ –≤ **Settings** ‚Üí **Basic**
2. –î–æ–±–∞–≤–µ—Ç–µ **App Domains**: `localhost`
3. –î–æ–±–∞–≤–µ—Ç–µ **Site URL**: `https://localhost:7008/`
4. –ö–ª–∏–∫–Ω–µ—Ç–µ **Save Changes**

### –°—Ç—ä–ø–∫–∞ 4: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ Valid OAuth Redirect URIs

1. –í –ª—è–≤–æ—Ç–æ –º–µ–Ω—é –æ—Ç–∏–¥–µ—Ç–µ –≤ **Products** ‚Üí **Facebook Login** ‚Üí **Settings**
2. –í —Å–µ–∫—Ü–∏—è—Ç–∞ **Valid OAuth Redirect URIs** –¥–æ–±–∞–≤–µ—Ç–µ:
   ```
   https://localhost:7008/signin-facebook
   http://localhost:5028/signin-facebook
   https://localhost:44329/signin-facebook
   ```
3. –ö–ª–∏–∫–Ω–µ—Ç–µ **Save Changes**

### –°—Ç—ä–ø–∫–∞ 5: –ö–æ–ø–∏—Ä–∞–Ω–µ –Ω–∞ credentials

1. –í **Settings** ‚Üí **Basic** –Ω–∞–º–µ—Ä–µ—Ç–µ:

   - **App ID** ‚Üí —Ç–æ–≤–∞ –µ –≤–∞—à–∏—è—Ç `AppId`
   - **App Secret** ‚Üí –∫–ª–∏–∫–Ω–µ—Ç–µ **Show** –∏ –∫–æ–ø–∏—Ä–∞–π—Ç–µ

2. –î–æ–±–∞–≤–µ—Ç–µ –≥–∏ –≤ `appsettings.json`:

```json
{
  "Authentication": {
    "Facebook": {
      "AppId": "–í–ê–®–ò–Ø–¢-FACEBOOK-APP-ID",
      "AppSecret": "–í–ê–®–ò–Ø–¢-FACEBOOK-APP-SECRET"
    }
  }
}
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–∏ –±–µ–ª–µ–∂–∫–∏

### –ó–∞ Facebook:

- **Development Mode**: –ü–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ Facebook –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ç–∞ —Å–∞ –≤ "Development Mode"
- –í Development Mode —Å–∞–º–æ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∏—Ç–µ –∏ —Ç–µ—Å—Ç–æ–≤–∏—Ç–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏** –º–æ–≥–∞—Ç –¥–∞ –≤–ª—è–∑–∞—Ç
- –ó–∞ –¥–∞ –¥–æ–±–∞–≤–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏:
  - –û—Ç–∏–¥–µ—Ç–µ –≤ **Roles** ‚Üí **Test Users**
  - –°—ä–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –∏–ª–∏ –¥–æ–±–∞–≤–µ—Ç–µ —Ä–µ–∞–ª–Ω–∏ Facebook –ø—Ä–æ—Ñ–∏–ª–∏ –∫–∞—Ç–æ **Testers**

### –ó–∞ Google:

- –í "Testing" —Ä–µ–∂–∏–º —Å–∞–º–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏, –¥–æ–±–∞–≤–µ–Ω–∏ –≤ **OAuth consent screen**, –º–æ–≥–∞—Ç –¥–∞ –≤–ª—è–∑–∞—Ç
- –ó–∞ –ø—É–±–ª–∏—á–µ–Ω –¥–æ—Å—Ç—ä–ø —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—É–±–ª–∏–∫—É–≤–∞—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –∑–∞ –ø—Ä–µ–≥–ª–µ–¥

---

## üß™ –¢–µ—Å—Ç–≤–∞–Ω–µ –ª–æ–∫–∞–ª–Ω–æ

1. –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ —Å—Ç–µ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–ª–∏ `appsettings.json` —Å —Ä–µ–∞–ª–Ω–∏—Ç–µ credentials
2. –°—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Å **HTTPS –ø—Ä–æ—Ñ–∏–ª–∞**:
   ```
   https://localhost:7008
   ```
3. –û—Ç–∏–¥–µ—Ç–µ –Ω–∞ `/Identity/Account/Login`
4. –ö–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ **"Continue with Google"** –∏–ª–∏ **"Continue with Facebook"**
5. –í–ª–µ–∑—Ç–µ —Å –≤–∞—à–∏—è Google/Facebook –∞–∫–∞—É–Ω—Ç
6. –°–ª–µ–¥ —É—Å–ø–µ—à–Ω–æ –≤–ª–∏–∑–∞–Ω–µ, —â–µ –±—ä–¥–µ—Ç–µ –ø—Ä–µ–Ω–∞—Å–æ—á–µ–Ω–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ

---

## üîí –°–∏–≥—É—Ä–Ω–æ—Å—Ç

‚ö†Ô∏è **–ù–∏–∫–æ–≥–∞ –Ω–µ –∫–æ–º–∏—Ç–∏—Ä–∞–π—Ç–µ `appsettings.json` —Å —Ä–µ–∞–ª–Ω–∏—Ç–µ credentials –≤ Git!**

–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ:

- **User Secrets** –∑–∞ –ª–æ–∫–∞–ª–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
  ```bash
  dotnet user-secrets set "Authentication:Google:ClientId" "–í–ê–®–ò–Ø–¢-CLIENT-ID"
  dotnet user-secrets set "Authentication:Google:ClientSecret" "–í–ê–®–ò–Ø–¢-CLIENT-SECRET"
  ```
- –ò–ª–∏ –æ—Ç–¥–µ–ª–Ω–∏ `appsettings.Development.json` —Ñ–∞–π–ª–æ–≤–µ, –∫–æ–∏—Ç–æ –Ω–µ —Å–µ –∫–æ–º–∏—Ç–∏—Ä–∞—Ç

---

## üìù –†–µ–∑—é–º–µ

‚úÖ **OAuth —Ä–∞–±–æ—Ç–∏ –ª–æ–∫–∞–ª–Ω–æ —Å localhost**  
‚úÖ **–ù–µ –µ –Ω—É–∂–µ–Ω –ø—É–±–ª–∏—á–µ–Ω —Ö–æ—Å—Ç–∏–Ω–≥ –∑–∞ development**  
‚úÖ **Google –∏ Facebook –ø–æ–¥–¥—ä—Ä–∂–∞—Ç localhost redirect URI-—Ç–∞**  
‚úÖ **–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ HTTPS –∑–∞ –ø–æ-–¥–æ–±—Ä–∞ —Å—ä–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç**

–ü—Ä–æ—Å—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π—Ç–µ redirect URI-—Ç–∞—Ç–∞ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞—Ç –≤–∞—à–∏—è –ª–æ–∫–∞–ª–µ–Ω –ø–æ—Ä—Ç (`https://localhost:7008/signin-google`) –∏ –≤—Å–∏—á–∫–æ —â–µ —Ä–∞–±–æ—Ç–∏!
