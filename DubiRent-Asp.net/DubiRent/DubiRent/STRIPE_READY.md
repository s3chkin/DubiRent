# ‚úÖ Stripe CLI –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω –£—Å–ø–µ—à–Ω–æ!

## –°–ª–µ–¥–≤–∞—â–∏ –°—Ç—ä–ø–∫–∏

### 1. Login –≤ Stripe (–ó–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ!)

–û—Ç–≤–æ—Ä–∏ –Ω–æ–≤ PowerShell —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –Ω–∞–ø–∏—à–∏:

```powershell
stripe login
```

–¢–æ–≤–∞ —â–µ:

- –ü–æ–∫–∞–∂–µ pairing code
- –û—Ç–≤–æ—Ä–∏ –±—Ä–∞—É–∑—ä—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- –ü–æ–ø–∏—Ç–∞ —Ç–µ –¥–∞ –≤—ä–≤–µ–¥–µ—à pairing code –≤ –±—Ä–∞—É–∑—ä—Ä–∞

**–ò–ª–∏ —Ä—ä—á–Ω–æ:** –û—Ç–∏–¥–∏ –Ω–∞ –ª–∏–Ω–∫–∞ –∫–æ–π—Ç–æ —Å–µ –ø–æ–∫–∞–∑–≤–∞ –∏ –≤—ä–≤–µ–¥–∏ pairing code-–∞.

### 2. –°—Ç–∞—Ä—Ç–∏—Ä–∞–π Webhook Listener

–°–ª–µ–¥ –∫–∞—Ç–æ —Å–∏ –ª–æ–≥–Ω–∞—Ç, —Å—Ç–∞—Ä—Ç–∏—Ä–∞–π:

```powershell
cd DubiRent
.\start-stripe-webhook.ps1
```

**–ò–ª–∏ —Ä—ä—á–Ω–æ:**

```powershell
stripe listen --forward-to https://localhost:5001/Payment/Webhook
```

**–ó–∞–±–µ–ª–µ–∂–∫–∞:** –ê–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Ç–∏ —Ä–∞–±–æ—Ç–∏ –Ω–∞ –¥—Ä—É–≥ –ø–æ—Ä—Ç, –ø—Ä–æ–º–µ–Ω–∏ `5001` —Å—ä—Å —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è –ø–æ—Ä—Ç.

### 3. –ö–æ–ø–∏—Ä–∞–π Webhook Secret

–°–ª–µ–¥ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ, —â–µ –≤–∏–¥–∏—à:

```
> Ready! Your webhook signing secret is whsec_xxxxxxxxxxxxx
```

**–í–∞–∂–Ω–æ:** –ö–æ–ø–∏—Ä–∞–π —Ç–æ–∑–∏ `whsec_...` secret!

### 4. –û–±–Ω–æ–≤–∏ appsettings.json

–û—Ç–≤–æ—Ä–∏ `appsettings.json` –∏ –¥–æ–±–∞–≤–∏/–æ–±–Ω–æ–≤–∏:

```json
"Stripe": {
  "PublishableKey": "pk_test_YOUR_KEY",
  "SecretKey": "sk_test_YOUR_KEY",
  "WebhookSecret": "whsec_xxxxxxxxxxxxx"  // ‚Üê –¢–æ–∑–∏ –æ—Ç —Å—Ç—ä–ø–∫–∞ 3
}
```

**–ó–∞ –¥–∞ –ø–æ–ª—É—á–∏—à API –∫–ª—é—á–æ–≤–µ—Ç–µ:**

1. –û—Ç–∏–¥–∏ –Ω–∞: https://dashboard.stripe.com/test/apikeys
2. –ö–æ–ø–∏—Ä–∞–π Publishable key –∏ Secret key
3. –î–æ–±–∞–≤–∏ –≥–∏ –≤ `appsettings.json`

### 5. –°—Ç–∞—Ä—Ç–∏—Ä–∞–π –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ

```powershell
dotnet run
```

### 6. –¢–µ—Å—Ç–≤–∞–π –ü–ª–∞—â–∞–Ω–µ—Ç–æ!

1. –û—Ç–∏–¥–∏ –Ω–∞ –¥–µ—Ç–∞–π–ª–∏—Ç–µ –Ω–∞ –∏–º–æ—Ç
2. –ö–ª–∏–∫–Ω–∏ "Pay with Stripe"
3. –í—ä–≤–µ–¥–∏ —Ç–µ—Å—Ç–æ–≤–∞ –∫–∞—Ä—Ç–∞: `4242 4242 4242 4242`
4. Expiry: `12/25`
5. CVC: `123`
6. ZIP: `12345`

–©–µ –≤–∏–¥–∏—à webhook events –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∫—ä–¥–µ—Ç–æ —Ä–∞–±–æ—Ç–∏ `stripe listen`!

## üìã –ö—Ä–∞—Ç–∫–æ –†–µ–∑—é–º–µ

‚úÖ **Stripe CLI –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω** - –≤–µ—Ä—Å–∏—è 1.33.0
‚è≥ **–°–ª–µ–¥–≤–∞—â–æ:** `stripe login`
‚è≥ **–°–ª–µ–¥ —Ç–æ–≤–∞:** `.\start-stripe-webhook.ps1`
‚è≥ **–°–ª–µ–¥ —Ç–æ–≤–∞:** –î–æ–±–∞–≤–∏ webhook secret –≤ `appsettings.json`

## üéâ –ì–æ—Ç–æ–≤–æ –∑–∞ –¢–µ—Å—Ç–≤–∞–Ω–µ!

–°–ª–µ–¥ —Ç–µ–∑–∏ —Å—Ç—ä–ø–∫–∏ –≤—Å–∏—á–∫–æ —â–µ –µ –≥–æ—Ç–æ–≤–æ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ Stripe –ø–ª–∞—â–∞–Ω–∏—è—Ç–∞ –ª–æ–∫–∞–ª–Ω–æ!
