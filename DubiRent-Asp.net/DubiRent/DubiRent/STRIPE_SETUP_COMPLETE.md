# âœ… Stripe Setup - Ð“Ð¾Ñ‚Ð¾Ð²Ð¾ Ð·Ð° Ð¢ÐµÑÑ‚Ð²Ð°Ð½Ðµ!

## ðŸŽ‰ ÐšÐ°ÐºÐ²Ð¾ Ðµ Ð½Ð°Ð¿Ñ€Ð°Ð²ÐµÐ½Ð¾:

1. âœ… **Stripe CLI Ð¸Ð½ÑÑ‚Ð°Ð»Ð¸Ñ€Ð°Ð½** - Ð²ÐµÑ€ÑÐ¸Ñ 1.33.0
   - Ð˜Ð½ÑÑ‚Ð°Ð»Ð¸Ñ€Ð°Ð½ Ð²: `C:\Users\PC\AppData\Local\Stripe`
   - Ð”Ð¾Ð±Ð°Ð²ÐµÐ½ Ð² PATH
   - Ð“Ð¾Ñ‚Ð¾Ð² Ð·Ð° Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð½Ðµ!

2. âœ… **Ð¡ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð²Ðµ Ð·Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ:**
   - `install-stripe-cli-simple.ps1` - Ð·Ð° Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð° Ð¸Ð½ÑÑ‚Ð°Ð»Ð°Ñ†Ð¸Ñ (Ð°ÐºÐ¾ Ðµ Ð½ÑƒÐ¶Ð½Ð¾)
   - `start-stripe-webhook.ps1` - Ð·Ð° ÑÑ‚Ð°Ñ€Ñ‚Ð¸Ñ€Ð°Ð½Ðµ Ð½Ð° webhook listener

3. âœ… **Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ:**
   - `STRIPE_SETUP.md` - Ð¾Ð±Ñ‰Ð° Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ
   - `STRIPE_LOCAL_TESTING.md` - Ð´ÐµÑ‚Ð°Ð¹Ð»Ð½Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð·Ð° Ð»Ð¾ÐºÐ°Ð»Ð½Ð¾ Ñ‚ÐµÑÑ‚Ð²Ð°Ð½Ðµ
   - `QUICK_STRIPE_SETUP.md` - Ð±ÑŠÑ€Ð·Ð¾ Ñ€ÑŠÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾
   - `INSTALL_STRIPE_CLI.md` - Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð·Ð° Ð¸Ð½ÑÑ‚Ð°Ð»Ð°Ñ†Ð¸Ñ
   - `STRIPE_READY.md` - ÑÐ»ÐµÐ´Ð²Ð°Ñ‰Ð¸ ÑÑ‚ÑŠÐ¿ÐºÐ¸

## ðŸ“‹ ÐžÑÑ‚Ð°Ð½Ð°Ð»Ð¸ Ð¡Ñ‚ÑŠÐ¿ÐºÐ¸ (Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð½Ð°Ð¿Ñ€Ð°Ð²Ð¸Ñˆ Ñ€ÑŠÑ‡Ð½Ð¾):

### Ð¡Ñ‚ÑŠÐ¿ÐºÐ° 1: Login Ð² Stripe

```powershell
stripe login
```

Ð¡Ð»ÐµÐ´Ð²Ð°Ð¹ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸Ñ‚Ðµ - Ñ‰Ðµ Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð²ÑŠÐ²ÐµÐ´ÐµÑˆ pairing code Ð² Ð±Ñ€Ð°ÑƒÐ·ÑŠÑ€Ð°.

### Ð¡Ñ‚ÑŠÐ¿ÐºÐ° 2: ÐŸÐ¾Ð»ÑƒÑ‡Ð¸ Stripe API ÐšÐ»ÑŽÑ‡Ð¾Ð²Ðµ

1. ÐžÑ‚Ð¸Ð´Ð¸ Ð½Ð°: **https://dashboard.stripe.com/test/apikeys**
2. Ð£Ð±ÐµÐ´Ð¸ ÑÐµ, Ñ‡Ðµ ÑÐ¸ Ð² **Test mode**
3. ÐšÐ¾Ð¿Ð¸Ñ€Ð°Ð¹:
   - **Publishable key** (Ð·Ð°Ð¿Ð¾Ñ‡Ð²Ð° Ñ `pk_test_`)
   - **Secret key** (Ð·Ð°Ð¿Ð¾Ñ‡Ð²Ð° Ñ `sk_test_`)

### Ð¡Ñ‚ÑŠÐ¿ÐºÐ° 3: ÐžÐ±Ð½Ð¾Ð²Ð¸ appsettings.json

ÐžÑ‚Ð²Ð¾Ñ€Ð¸ `appsettings.json` Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð¸:

```json
"Stripe": {
  "PublishableKey": "pk_test_Ð¢Ð£Ðš_Ð”ÐžÐ‘ÐÐ’Ð˜_Ð¢Ð’ÐžÐ¯Ð¢_ÐšÐ›Ð®Ð§",
  "SecretKey": "sk_test_Ð¢Ð£Ðš_Ð”ÐžÐ‘ÐÐ’Ð˜_Ð¢Ð’ÐžÐ¯Ð¢_ÐšÐ›Ð®Ð§",
  "WebhookSecret": "whsec_Ð¢Ð£Ðš_Ð©Ð•_Ð”ÐžÐ‘ÐÐ’Ð˜Ð¨_Ð¡Ð›Ð•Ð”_Ð¡Ð¢ÐªÐŸÐšÐ_4"
}
```

### Ð¡Ñ‚ÑŠÐ¿ÐºÐ° 4: Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¸Ñ€Ð°Ð¹ Webhook Listener

**Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð: Ð˜Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð°:**
```powershell
.\start-stripe-webhook.ps1
```

**Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð‘: Ð ÑŠÑ‡Ð½Ð¾:**
```powershell
stripe listen --forward-to https://localhost:5001/Payment/Webhook
```

**Ð’Ð°Ð¶Ð½Ð¾:** ÐšÐ¾Ð³Ð°Ñ‚Ð¾ ÑÐµ ÑÑ‚Ð°Ñ€Ñ‚Ð¸Ñ€Ð°, Ñ‰Ðµ Ð²Ð¸Ð´Ð¸Ñˆ:
```
> Ready! Your webhook signing secret is whsec_xxxxxxxxxxxxx
```

ÐšÐ¾Ð¿Ð¸Ñ€Ð°Ð¹ Ñ‚Ð¾Ð·Ð¸ `whsec_...` secret Ð¸ Ð³Ð¾ Ð´Ð¾Ð±Ð°Ð²Ð¸ Ð² `appsettings.json` â†’ `WebhookSecret`.

### Ð¡Ñ‚ÑŠÐ¿ÐºÐ° 5: Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¸Ñ€Ð°Ð¹ ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÐµÑ‚Ð¾

```powershell
dotnet run
```

### Ð¡Ñ‚ÑŠÐ¿ÐºÐ° 6: Ð¢ÐµÑÑ‚Ð²Ð°Ð¹!

1. ÐžÑ‚Ð¸Ð´Ð¸ Ð½Ð° `https://localhost:5001`
2. Ð›Ð¾Ð³Ð½Ð¸ ÑÐµ (Ð¸Ð»Ð¸ ÑÑŠÐ·Ð´Ð°Ð¹ Ð°ÐºÐ°ÑƒÐ½Ñ‚)
3. ÐžÑ‚Ð¸Ð´Ð¸ Ð½Ð° Ð´ÐµÑ‚Ð°Ð¹Ð»Ð¸Ñ‚Ðµ Ð½Ð° Ð¸Ð¼Ð¾Ñ‚
4. ÐšÐ»Ð¸ÐºÐ½Ð¸ **"Pay with Stripe"**
5. Ð’ÑŠÐ²ÐµÐ´Ð¸ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð° ÐºÐ°Ñ€Ñ‚Ð°:
   - **ÐšÐ°Ñ€Ñ‚Ð°:** `4242 4242 4242 4242`
   - **Expiry:** `12/25`
   - **CVC:** `123`
   - **ZIP:** `12345`
6. ÐšÐ»Ð¸ÐºÐ½Ð¸ **"Pay"**
7. Ð©Ðµ ÑÐµ Ð²ÑŠÑ€Ð½ÐµÑˆ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾ Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¿Ð»Ð°Ñ‰Ð°Ð½Ðµ!

Ð’ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»Ð° ÐºÑŠÐ´ÐµÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð¸ `stripe listen` Ñ‰Ðµ Ð²Ð¸Ð´Ð¸Ñˆ webhook events:
```
2025-01-06 15:30:45 --> checkout.session.completed [evt_xxx]
2025-01-06 15:30:45 <-- [200] POST https://localhost:5001/Payment/Webhook
```

## ðŸŽ¯ Ð¢ÐµÑÑ‚Ð¾Ð²Ð¸ ÐºÐ°Ñ€Ñ‚Ð¸:

- âœ… **Ð£ÑÐ¿ÐµÑˆÐ½Ð¾ Ð¿Ð»Ð°Ñ‰Ð°Ð½Ðµ:** `4242 4242 4242 4242`
- âŒ **ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚ÑŠÑ‡Ð½Ð¸ ÑÑ€ÐµÐ´ÑÑ‚Ð²Ð°:** `4000 0000 0000 9995`
- âŒ **ÐžÑ‚ÐºÐ°Ð·Ð°Ð½Ð¾ Ð¿Ð»Ð°Ñ‰Ð°Ð½Ðµ:** `4000 0000 0000 0002`

## ðŸ“ Ð‘ÐµÐ»ÐµÐ¶ÐºÐ¸:

- **Ð’ÑÐ¸Ñ‡ÐºÐ¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð¸ Ð»Ð¾ÐºÐ°Ð»Ð½Ð¾** - Ð½Ðµ Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð´Ð° Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐ²Ð°Ñˆ ÑÐ°Ð¹Ñ‚Ð°!
- **Webhooks Ð¸Ð·Ð¸ÑÐºÐ²Ð°Ñ‚ HTTPS** - Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð°Ð¹ `https://localhost:5001`
- **Ð—Ð° production** Ñ‰Ðµ Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñˆ webhook URL Ð² Stripe Dashboard

## â“ ÐŸÐ¾Ð¼Ð¾Ñ‰:

ÐÐºÐ¾ Ð¸Ð¼Ð°Ñˆ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð¸:
1. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸ `STRIPE_LOCAL_TESTING.md` Ð·Ð° Ð´ÐµÑ‚Ð°Ð¹Ð»Ð¸
2. ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸ `QUICK_STRIPE_SETUP.md` Ð·Ð° Ð±ÑŠÑ€Ð·Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ
3. Ð£Ð±ÐµÐ´Ð¸ ÑÐµ Ñ‡Ðµ ÑÐ¸ Ð»Ð¾Ð³Ð½Ð°Ñ‚: `stripe config --list`

## ðŸš€ Ð“Ð¾Ñ‚Ð¾Ð²Ð¾!

Ð¡Ð»ÐµÐ´ ÑÑ‚ÑŠÐ¿ÐºÐ¸ 1-6 Ð²ÑÐ¸Ñ‡ÐºÐ¾ Ñ‰Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð¸! Ð£ÑÐ¿ÐµÑ…! ðŸŽ‰

